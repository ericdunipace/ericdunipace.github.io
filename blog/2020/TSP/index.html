<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> The Traveling Salesman Problem: Installing Concorde on Mac Catalina with CPLEX | Eric A. Dunipace </title> <meta name="author" content="Eric A. Dunipace"> <meta name="description" content="Personal website of Eric A. Dunipace — MD/PhD "> <meta name="keywords" content="Dunipace, Eric, optimal, transport, optimal transport, Harvard, UCLA, DGSOM, Berkeley, Stanford, psychiatry, biostats, biostatistics, statistics, stats, machine learning, Zubizarreta, Trippa, Eric Dunipace, causal, inference"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?5b15871aca489a433d98b6c24c83b78b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ericdunipace.github.io/blog/2020/TSP/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Eric</span> A. Dunipace </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Traveling Salesman Problem: Installing Concorde on Mac Catalina with CPLEX</h1> <p class="post-meta"> Created in March 16, 2020 </p> <p class="post-tags"> <a href="/blog/2020"> <i class="fa-solid fa-calendar fa-sm"></i> 2020 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Long time no post and, unfortunately for the casual reader, this post is mostly describing how to install Concorde optimizer for the Traveling Salesman Problem (TSP) with Mac OS Catalina using the CPLEX backend. If this means nothing to you, click away!</p> <p>First: CPLEX is a commercial linear programming solver available free for the academic community. I guess the idea is to hook us so that we pay when we leave or convince our organizations to pay for a license when we leave.</p> <p>Second: Concorde is what the <code class="language-plaintext highlighter-rouge">TSP</code> package in <code class="language-plaintext highlighter-rouge">R</code> calls state of the art for getting an exact solution to the Traveling Salesman Problem. The only problem is that one must install it separately and since Concorde was last updated in 2003, some things don’t work quite as easily as we would like. For example, it was made to run with CPLEX 8 but the current CPLEX version on my machine is 12.10! Now, on to the actual installation details.</p> <ol> <li> <p>Download Concorde<br> Concorde can be downloaded from <a href="https://math.uwaterloo.ca/tsp/concorde/downloads/codes/src/co031219.tgz" rel="external nofollow noopener" target="_blank">here</a>.</p> </li> <li>Download and Install CPLEX<br> See the <a href="https://www.ibm.com/products/ilog-cplex-optimization-studio" rel="external nofollow noopener" target="_blank">IBM website</a> for more details</li> <li>Untar the Concorde files<br> <pre><code class="language-unix">tar xvf co031219.tar
</code></pre> </li> <li>Enter the Concorde directory<br> <pre><code class="language-unix">cd /path/to/concorde
</code></pre> </li> <li>Create a symlink to the CPLEX files<br> On my machine, this looks something like:<br> <pre><code class="language-unix">ln -s /path/to/cplex/include/ilcplex/*.h .
ln -s /path/to/cplex/lib/x86-64_osx/static_pic/libcplex.a .
</code></pre> <p>note: this is done inside the Concorde directory.</p> </li> <li>Add compiler flags<br> <pre><code class="language-unix">export CFLAGS="-g -O3 -arch x86_64"
</code></pre> </li> <li>Change Concorde files<br> In “concorde/Makefile.in” change LIBFLAGS to:<br> <pre><code class="language-unix">LIBFLAGS = @LIBS@ -lpthread
</code></pre> <p>In “concorde/TSP/Makefile.in” change LIBFLAGS to:<br></p> <pre><code class="language-unix">LIBFLAGS = @LIBS@ -lpthread -ldl
</code></pre> <p>In “concorde/LP/lpcplex8.c” after #undef  CC_CPLEX_DISPLAY add:<br></p> <pre><code class="language-unix">#ifndef CPX_PARAM_FASTMIP
#define CPX_PARAM_FASTMIP 1017
#endif
</code></pre> <p>In “concorde/TSP/tsp_call.c” at line 479, change the 0 to a 1 (see <a href="https://www.ibm.com/developerworks/community/forums/html/topic?id=96be05f6-fca8-4679-8733-28c034755ffc&amp;permalinkReplyUuid=f7df291c-4717-45c6-b416-a86c69100d35" rel="external nofollow noopener" target="_blank">this post</a> by one of the designers of Concorde)</p> </li> <li>Run configure<br> Note the host option. It gives a warning saying it doesn’t know what “darwin” is on my machine, but won’t run without it ¯_(ツ)_/¯ <br> <pre><code class="language-unix">./configure --host=darwin --prefix=/path/to/concorde –with-cplex=/path/to/concorde
</code></pre> </li> <li>Run make<br> <pre><code class="language-unix">make
</code></pre> </li> <li>If you can run Concorde without an error, you’re done! The easiest way for me is within the TSP R package. You may need to specify the location of the Concorde TSP files like so:<br> <div class="language-r highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">tsp</span><span class="o">::</span><span class="n">concorde_path</span><span class="p">(</span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"/path/to/concorde/TSP"</span><span class="p">)</span><span class="w">
</span></code></pre></div> </div> </li> <li>And then check the TSP example:<br> <div class="language-r highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">(</span><span class="s2">"USCA312"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"TSP"</span><span class="p">)</span><span class="w">
</span><span class="n">TSP</span><span class="o">::</span><span class="n">solve_TSP</span><span class="p">(</span><span class="n">USCA312</span><span class="p">,</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"concorde"</span><span class="p">,</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">clo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"-V"</span><span class="p">))</span><span class="w">
</span></code></pre></div> </div> <p>If that works, then you should be all set!</p> </li> </ol> <p>Details from this post come from <a href="https://leandro-coelho.com/install-and-run-concorde-with-cplex/" rel="external nofollow noopener" target="_blank">this other post</a> by Professor Leandro Coelho and <a href="https://qmha.wordpress.com/2015/08/20/installing-concorde-on-mac-os-x/" rel="external nofollow noopener" target="_blank">this post</a> by Hà Quang Minh, adapted to what worked on my machine (mid-2019 MacBook Air).</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/WpProj-Package-Is-Live/">WpProj hits CRAN!</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/RcppCGAL-updates/">RcppCGAL updated</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2019/bias-variance/">The Bias-Variance Trade-off</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/RcppCGAL-back-on-cran/">RcppCGAL is back on CRAN</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2020/rqpen-bug/">Bug alert in rqPen!</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Eric A. Dunipace. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>